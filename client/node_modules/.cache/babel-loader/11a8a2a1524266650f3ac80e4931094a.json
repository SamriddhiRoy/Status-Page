{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Samri/creator/creator/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"C:/Users/Samri/creator/creator/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Samri/creator/creator/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Samri/creator/creator/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Samri/creator/creator/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Samri/creator/creator/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import Label from\"../components/ui/label\";import Input from\"../components/ui/input\";import Button from\"../components/ui/button\";import{Textarea}from\"../components/ui/textarea\";import Select from'react-select';import emailjs from\"emailjs-com\";import Sidebar from'../components/Sidebar';import Navbar from'../components/Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var IncidentManagement=function IncidentManagement(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),incidents=_useState2[0],setIncidents=_useState2[1];var _useState3=useState({title:\"\",description:\"\",status:\"investigating\",services:[],type:\"incident\",email:\"\"}),_useState4=_slicedToArray(_useState3,2),formIncident=_useState4[0],setFormIncident=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),editingIncidentId=_useState6[0],setEditingIncidentId=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),availableServices=_useState8[0],setAvailableServices=_useState8[1];useEffect(function(){fetchIncidents();fetchAvailableServices();},[]);var fetchIncidents=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8001/incidents/\");case 3:res=_context.sent;setIncidents(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching incidents:\",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchIncidents(){return _ref.apply(this,arguments);};}();var fetchAvailableServices=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"http://localhost:8001/services/\");case 3:response=_context2.sent;setAvailableServices(response.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(\"Error fetching available services:\",_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function fetchAvailableServices(){return _ref2.apply(this,arguments);};}();var handleFormChange=function handleFormChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormIncident(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response,_response,_error$response,_error$response2,_error$response2$data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(!editingIncidentId){_context3.next=9;break;}_context3.next=4;return axios.put(\"http://localhost:8001/incidents/\".concat(editingIncidentId),formIncident);case 4:response=_context3.sent;setIncidents(function(prev){return prev.map(function(incident){return incident.id===editingIncidentId?response.data:incident;});});setEditingIncidentId(null);_context3.next=13;break;case 9:_context3.next=11;return axios.post(\"http://localhost:8001/incidents/\",formIncident);case 11:_response=_context3.sent;setIncidents(function(prev){return[].concat(_toConsumableArray(prev),[_response.data]);});case 13:setFormIncident({title:\"\",description:\"\",status:\"investigating\",services:[],type:\"incident\",email:\"\"});_context3.next=20;break;case 16:_context3.prev=16;_context3.t0=_context3[\"catch\"](0);console.error(\"Error submitting incident:\",((_error$response=_context3.t0.response)===null||_error$response===void 0?void 0:_error$response.data)||_context3.t0.message);alert(\"Error submitting incident: \".concat(((_error$response2=_context3.t0.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||_context3.t0.message));case 20:case\"end\":return _context3.stop();}}},_callee3,null,[[0,16]]);}));return function handleSubmit(){return _ref3.apply(this,arguments);};}();var sendEmail=function sendEmail(to_email,subject,message){emailjs.send(\"service_a3ubtln\",\"template_ef5rfrb\",{to_email:to_email,subject:subject,message:message},\"X2AdJAfMlruyyGzgb\").then(function(response){alert(\"Email sent successfully!\");}).catch(function(error){alert(\"Failed to send email: \".concat(error.text||error.message));});};var startEditing=function startEditing(incident){setEditingIncidentId(incident.id);var serviceIds=incident.services.map(function(serviceName){var service=availableServices.find(function(s){return s.name===serviceName;});return service?service.id:serviceName;});setFormIncident({title:incident.title,description:incident.description,status:incident.status,services:serviceIds||[],type:incident.type,email:incident.email||\"\"});};var cancelEditing=function cancelEditing(){setEditingIncidentId(null);setFormIncident({title:\"\",description:\"\",status:\"investigating\",services:[],type:\"incident\",email:\"\"});};var deleteIncident=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.delete(\"http://localhost:8001/incidents/\".concat(id));case 3:setIncidents(function(prev){return prev.filter(function(incident){return incident.id!==id;});});_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);alert(\"Error deleting incident: \".concat(_context4.t0.message));case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function deleteIncident(_x){return _ref4.apply(this,arguments);};}();var serviceOptions=availableServices.map(function(service){return{value:service.id,label:service.name};});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-b from-white to-gray-50\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"pl-0 lg:pl-64 transition-all duration-300\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 font-sans\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl sm:text-4xl font-bold text-center text-blue-600 mb-8\",children:\"Incident Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-700 mb-4\",children:editingIncidentId?'Edit Incident':'New Incident'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(Input,{name:\"title\",value:formIncident.title,onChange:handleFormChange,placeholder:\"Incident title\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(Input,{name:\"description\",value:formIncident.description,onChange:handleFormChange,placeholder:\"Description\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",name:\"email\",value:formIncident.email,onChange:handleFormChange,placeholder:\"someone@example.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"status\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:formIncident.status,onChange:handleFormChange,className:\"w-full px-3 py-2 border rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"investigating\",children:\"Investigating\"}),/*#__PURE__*/_jsx(\"option\",{value:\"identified\",children:\"Identified\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monitoring\",children:\"Monitoring\"}),/*#__PURE__*/_jsx(\"option\",{value:\"resolved\",children:\"Resolved\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"type\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:formIncident.type,onChange:handleFormChange,className:\"w-full px-3 py-2 border rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"incident\",children:\"Incident\"}),/*#__PURE__*/_jsx(\"option\",{value:\"maintenance\",children:\"Maintenance\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"services\",children:\"Services\"}),/*#__PURE__*/_jsx(Select,{isMulti:true,name:\"services\",options:serviceOptions,value:formIncident.services.map(function(id){var service=availableServices.find(function(s){return s.id===id;});return{value:service===null||service===void 0?void 0:service.id,label:service===null||service===void 0?void 0:service.name};}),onChange:function onChange(selected){return setFormIncident(function(prev){return _objectSpread(_objectSpread({},prev),{},{services:selected.map(function(s){return s.value;})});});},className:\"z-10\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 mt-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSubmit,className:\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow-md\",children:[editingIncidentId?'Update':'Create',\" Incident\"]}),editingIncidentId&&/*#__PURE__*/_jsx(\"button\",{onClick:cancelEditing,className:\"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md\",children:\"Cancel\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:\"Existing Incidents\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white shadow-md rounded-lg\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:incidents.map(function(incident){return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:incident.title}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\",children:incident.description}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 rounded-full text-xs font-medium \".concat(incident.status===\"resolved\"?\"bg-green-100 text-green-800\":incident.status===\"monitoring\"?\"bg-blue-100 text-blue-800\":incident.status===\"identified\"?\"bg-yellow-100 text-yellow-800\":\"bg-red-100 text-red-800\"),children:incident.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 rounded-full text-xs font-semibold \".concat(incident.type===\"maintenance\"?\"bg-purple-100 text-purple-800\":\"bg-gray-100 text-gray-800\"),children:incident.type})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return startEditing(incident);},className:\"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded\",children:\"\\u270F\\uFE0F Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteIncident(incident.id);},className:\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded\",children:\"\\uD83D\\uDDD1\\uFE0F Delete\"}),incident.email&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return sendEmail(incident.email,incident.title,incident.description);},className:\"bg-purple-500 hover:bg-purple-600 text-white px-3 py-1 rounded\",children:\"\\uD83D\\uDCE7 Email\"})]})]},incident.id);})})]})})]})]})]})]});};export default IncidentManagement;","map":{"version":3,"names":["React","useState","useEffect","axios","Label","Input","Button","Textarea","Select","emailjs","Sidebar","Navbar","IncidentManagement","incidents","setIncidents","title","description","status","services","type","email","formIncident","setFormIncident","editingIncidentId","setEditingIncidentId","availableServices","setAvailableServices","fetchIncidents","fetchAvailableServices","get","res","data","console","error","response","handleFormChange","e","target","name","value","prev","handleSubmit","put","map","incident","id","post","message","alert","detail","sendEmail","to_email","subject","send","then","catch","text","startEditing","serviceIds","serviceName","service","find","s","cancelEditing","deleteIncident","delete","filter","serviceOptions","label","selected"],"sources":["C:/Users/Samri/creator/creator/client/src/pages/Incidents.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Label from \"../components/ui/label\"; \r\n\r\nimport Input from \"../components/ui/input\";   \r\n\r\nimport Button from \"../components/ui/button\";\r\nimport { Textarea } from \"../components/ui/textarea\";\r\nimport Select from 'react-select';\r\n\r\nimport emailjs from \"emailjs-com\";\r\n\r\nimport Sidebar from '../components/Sidebar';\r\nimport Navbar from '../components/Navbar';\r\n\r\n\r\nconst IncidentManagement = () => {\r\n  const [incidents, setIncidents] = useState([]);\r\n  const [formIncident, setFormIncident] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    status: \"investigating\",\r\n    services: [],\r\n    type: \"incident\",\r\n    email: \"\",\r\n  });\r\n  const [editingIncidentId, setEditingIncidentId] = useState(null);\r\n  const [availableServices, setAvailableServices] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchIncidents();\r\n    fetchAvailableServices();\r\n  }, []);\r\n\r\n  const fetchIncidents = async () => {\r\n    try {\r\n      const res = await axios.get(\"http://localhost:8001/incidents/\");\r\n      setIncidents(res.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching incidents:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchAvailableServices = async () => {\r\n    try {\r\n      const response = await axios.get(\"http://localhost:8001/services/\");\r\n      setAvailableServices(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching available services:\", error);\r\n    }\r\n  };\r\n\r\n  const handleFormChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormIncident((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      if (editingIncidentId) {\r\n        const response = await axios.put(`http://localhost:8001/incidents/${editingIncidentId}`, formIncident);\r\n        setIncidents((prev) =>\r\n          prev.map((incident) =>\r\n            incident.id === editingIncidentId ? response.data : incident\r\n          )\r\n        );\r\n        setEditingIncidentId(null);\r\n      } else {\r\n        const response = await axios.post(\"http://localhost:8001/incidents/\", formIncident);\r\n        setIncidents((prev) => [...prev, response.data]);\r\n      }\r\n\r\n      setFormIncident({\r\n        title: \"\",\r\n        description: \"\",\r\n        status: \"investigating\",\r\n        services: [],\r\n        type: \"incident\",\r\n        email: \"\",\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error submitting incident:\", error.response?.data || error.message);\r\n      alert(`Error submitting incident: ${error.response?.data?.detail || error.message}`);\r\n    }\r\n  };\r\n\r\n  const sendEmail = (to_email, subject, message) => {\r\n    emailjs.send(\r\n      \"service_a3ubtln\",\r\n      \"template_ef5rfrb\",\r\n      { to_email, subject, message },\r\n      \"X2AdJAfMlruyyGzgb\"\r\n    ).then((response) => {\r\n      alert(\"Email sent successfully!\");\r\n    }).catch((error) => {\r\n      alert(`Failed to send email: ${error.text || error.message}`);\r\n    });\r\n  };\r\n\r\n  const startEditing = (incident) => {\r\n    setEditingIncidentId(incident.id);\r\n    const serviceIds = incident.services.map(serviceName => {\r\n      const service = availableServices.find(s => s.name === serviceName);\r\n      return service ? service.id : serviceName;\r\n    });\r\n\r\n    setFormIncident({\r\n      title: incident.title,\r\n      description: incident.description,\r\n      status: incident.status,\r\n      services: serviceIds || [],\r\n      type: incident.type,\r\n      email: incident.email || \"\",\r\n    });\r\n  };\r\n\r\n  const cancelEditing = () => {\r\n    setEditingIncidentId(null);\r\n    setFormIncident({\r\n      title: \"\",\r\n      description: \"\",\r\n      status: \"investigating\",\r\n      services: [],\r\n      type: \"incident\",\r\n      email: \"\",\r\n    });\r\n  };\r\n\r\n  const deleteIncident = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:8001/incidents/${id}`);\r\n      setIncidents((prev) => prev.filter((incident) => incident.id !== id));\r\n    } catch (error) {\r\n      alert(`Error deleting incident: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const serviceOptions = availableServices.map(service => ({\r\n    value: service.id,\r\n    label: service.name,\r\n  }));\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-white to-gray-50\">\r\n      <Sidebar />\r\n      <div className=\"pl-0 lg:pl-64 transition-all duration-300\">\r\n        <Navbar />\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 font-sans\">\r\n         <h1 className=\"text-3xl sm:text-4xl font-bold text-center text-blue-600 mb-8\">Incident Management</h1>\r\n\r\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\r\n            <h2 className=\"text-2xl font-semibold text-gray-700 mb-4\">{editingIncidentId ? 'Edit Incident' : 'New Incident'}</h2>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              <div>\r\n                <Label htmlFor=\"title\">Title</Label>\r\n                <Input name=\"title\" value={formIncident.title} onChange={handleFormChange} placeholder=\"Incident title\" />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Input name=\"description\" value={formIncident.description} onChange={handleFormChange} placeholder=\"Description\" />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"email\">Email</Label>\r\n                <Input type=\"email\" name=\"email\" value={formIncident.email} onChange={handleFormChange} placeholder=\"someone@example.com\" />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"status\">Status</Label>\r\n                <select name=\"status\" value={formIncident.status} onChange={handleFormChange} className=\"w-full px-3 py-2 border rounded-md\">\r\n                  <option value=\"investigating\">Investigating</option>\r\n                  <option value=\"identified\">Identified</option>\r\n                  <option value=\"monitoring\">Monitoring</option>\r\n                  <option value=\"resolved\">Resolved</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"type\">Type</Label>\r\n                <select name=\"type\" value={formIncident.type} onChange={handleFormChange} className=\"w-full px-3 py-2 border rounded-md\">\r\n                  <option value=\"incident\">Incident</option>\r\n                  <option value=\"maintenance\">Maintenance</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"services\">Services</Label>\r\n                <Select\r\n                  isMulti\r\n                  name=\"services\"\r\n                  options={serviceOptions}\r\n                  value={formIncident.services.map(id => {\r\n                    const service = availableServices.find(s => s.id === id);\r\n                    return { value: service?.id, label: service?.name };\r\n                  })}\r\n                  onChange={(selected) => setFormIncident(prev => ({ ...prev, services: selected.map(s => s.value) }))}\r\n                  className=\"z-10\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-4 mt-6\">\r\n              <button\r\n                onClick={handleSubmit}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow-md\"\r\n              >\r\n                {editingIncidentId ? 'Update' : 'Create'} Incident\r\n              </button>\r\n              {editingIncidentId && (\r\n                <button\r\n                  onClick={cancelEditing}\r\n                  className=\"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-10\">\r\n            <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Existing Incidents</h3>\r\n            <div className=\"overflow-x-auto bg-white shadow-md rounded-lg\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Title</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Description</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Type</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {incidents.map((incident) => (\r\n                    <tr key={incident.id} className=\"hover:bg-gray-50\">\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{incident.title}</td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">{incident.description}</td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n                        <span className={`inline-flex px-2 py-1 rounded-full text-xs font-medium ${\r\n                          incident.status === \"resolved\"\r\n                            ? \"bg-green-100 text-green-800\"\r\n                            : incident.status === \"monitoring\"\r\n                            ? \"bg-blue-100 text-blue-800\"\r\n                            : incident.status === \"identified\"\r\n                            ? \"bg-yellow-100 text-yellow-800\"\r\n                            : \"bg-red-100 text-red-800\"\r\n                        }`}>\r\n                          {incident.status}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n                        <span className={`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${\r\n                          incident.type === \"maintenance\"\r\n                            ? \"bg-purple-100 text-purple-800\"\r\n                            : \"bg-gray-100 text-gray-800\"\r\n                        }`}>\r\n                          {incident.type}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 space-x-2\">\r\n                        <button\r\n                          onClick={() => startEditing(incident)}\r\n                          className=\"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded\"\r\n                        >\r\n                          ✏️ Edit\r\n                        </button>\r\n                        <button\r\n                          onClick={() => deleteIncident(incident.id)}\r\n                          className=\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded\"\r\n                        >\r\n                          🗑️ Delete\r\n                        </button>\r\n                        {incident.email && (\r\n                          <button\r\n                            onClick={() => sendEmail(incident.email, incident.title, incident.description)}\r\n                            className=\"bg-purple-500 hover:bg-purple-600 text-white px-3 py-1 rounded\"\r\n                          >\r\n                            📧 Email\r\n                          </button>\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IncidentManagement;"],"mappings":"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"},"metadata":{},"sourceType":"module"}