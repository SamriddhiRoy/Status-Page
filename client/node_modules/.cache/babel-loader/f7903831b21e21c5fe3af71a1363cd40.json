{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Samri/creator/creator/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Samri/creator/creator/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Samri/creator/creator/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MemberList=function MemberList(_ref){var orgId=_ref.orgId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),members=_useState2[0],setMembers=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"member\"),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole=_useState6[1];var fetchMembers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8001/organizations/\".concat(orgId,\"/members\"));case 3:res=_context.sent;setMembers(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Failed to fetch members:\",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchMembers(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(orgId)fetchMembers();},[orgId]);var handleAdd=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.post(\"http://localhost:8001/organizations/members/\",{id:crypto.randomUUID(),user_email:email,role:role,organization_id:orgId});case 4:setEmail(\"\");fetchMembers();_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.error(\"Failed to add member:\",_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function handleAdd(_x){return _ref3.apply(this,arguments);};}();var handleUpdateRole=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(memberId,newRole){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"http://localhost:8001/organizations/members/\".concat(memberId),{role:newRole});case 3:fetchMembers();_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.error(\"Failed to update role:\",_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function handleUpdateRole(_x2,_x3){return _ref4.apply(this,arguments);};}();var handleDeleteMember=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(memberId){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.delete(\"http://localhost:8001/organizations/members/\".concat(memberId));case 3:fetchMembers();_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.error(\"Failed to delete member:\",_context4.t0);case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function handleDeleteMember(_x4){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-blue-50 shadow-lg rounded-lg mt-6 max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold text-blue-600 mb-6 text-center\",children:\"Add Member to Organization\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleAdd,className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Enter Email\",className:\"border border-gray-300 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsxs(\"select\",{value:role,onChange:function onChange(e){return setRole(e.target.value);},className:\"border border-gray-300 rounded-lg px-4 py-2 w-1/4 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"member\",children:\"Member\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700 transition duration-200\",children:\"Add\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-medium text-blue-600 mb-4 text-center\",children:\"Current Members\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white shadow-md rounded-lg\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:members.map(function(m){return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm text-gray-900\",children:m.user_email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium \".concat(m.role===\"admin\"?\"bg-blue-100 text-blue-800\":\"bg-green-100 text-green-800\"),children:m.role})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 text-sm space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleUpdateRole(m.id,m.role===\"admin\"?\"member\":\"admin\");},className:\"text-blue-600 hover:text-blue-800\",children:m.role===\"admin\"?\"Demote\":\"Promote\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteMember(m.id);},className:\"text-red-600 hover:text-red-800\",children:\"Delete\"})]})]},m.id);})})]})})]})]});};export default MemberList;","map":{"version":3,"names":["React","useState","useEffect","axios","MemberList","orgId","members","setMembers","email","setEmail","role","setRole","fetchMembers","get","res","data","console","error","handleAdd","e","preventDefault","post","id","crypto","randomUUID","user_email","organization_id","handleUpdateRole","memberId","newRole","put","handleDeleteMember","delete","target","value","map","m"],"sources":["C:/Users/Samri/creator/creator/client/src/pages/MemberList.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst MemberList = ({ orgId }) => {\r\n  const [members, setMembers] = useState([]);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [role, setRole] = useState(\"member\");\r\n\r\n  const fetchMembers = async () => {\r\n    try {\r\n      const res = await axios.get(`http://localhost:8001/organizations/${orgId}/members`);\r\n      setMembers(res.data);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch members:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (orgId) fetchMembers();\r\n  }, [orgId]);\r\n\r\n  const handleAdd = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.post(\"http://localhost:8001/organizations/members/\", {\r\n        id: crypto.randomUUID(),\r\n        user_email: email,\r\n        role,\r\n        organization_id: orgId,\r\n      });\r\n      setEmail(\"\");\r\n      fetchMembers(); \r\n    } catch (error) {\r\n      console.error(\"Failed to add member:\", error);\r\n    }\r\n  };\r\n\r\n const handleUpdateRole = async (memberId, newRole) => {\r\n  try {\r\n    \r\n    await axios.put(`http://localhost:8001/organizations/members/${memberId}`, { role: newRole });\r\n    \r\n    fetchMembers(); \r\n  } catch (error) {\r\n    console.error(\"Failed to update role:\", error);\r\n\r\n  }\r\n};\r\n\r\n\r\n\r\n  const handleDeleteMember = async (memberId) => {\r\n    try {\r\n    \r\n      await axios.delete(`http://localhost:8001/organizations/members/${memberId}`);\r\n      fetchMembers(); \r\n    } catch (error) {\r\n      console.error(\"Failed to delete member:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n   <div className=\"p-6 bg-blue-50 shadow-lg rounded-lg mt-6 max-w-4xl mx-auto\">\r\n  <h3 className=\"text-2xl font-semibold text-blue-600 mb-6 text-center\">\r\n    Add Member to Organization\r\n  </h3>\r\n\r\n  <form onSubmit={handleAdd} className=\"space-y-4\">\r\n    <div className=\"flex space-x-4\">\r\n      <input\r\n        type=\"email\"\r\n        placeholder=\"Enter Email\"\r\n        className=\"border border-gray-300 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n      />\r\n      <select\r\n        value={role}\r\n        onChange={(e) => setRole(e.target.value)}\r\n        className=\"border border-gray-300 rounded-lg px-4 py-2 w-1/4 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n      >\r\n        <option value=\"member\">Member</option>\r\n        <option value=\"admin\">Admin</option>\r\n      </select>\r\n      <button\r\n        type=\"submit\"\r\n        className=\"bg-green-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700 transition duration-200\"\r\n      >\r\n        Add\r\n      </button>\r\n    </div>\r\n  </form>\r\n\r\n  <div className=\"mt-8\">\r\n    <h4 className=\"text-xl font-medium text-blue-600 mb-4 text-center\">\r\n      Current Members\r\n    </h4>\r\n\r\n    <div className=\"overflow-x-auto bg-white shadow-md rounded-lg\">\r\n      <table className=\"min-w-full divide-y divide-gray-200\">\r\n        <thead className=\"bg-gray-100\">\r\n          <tr>\r\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Email</th>\r\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Role</th>\r\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n          {members.map((m) => (\r\n            <tr key={m.id} className=\"hover:bg-gray-50 transition-colors\">\r\n              <td className=\"px-6 py-4 text-sm text-gray-900\">{m.user_email}</td>\r\n              <td className=\"px-6 py-4 text-sm\">\r\n                <span\r\n                  className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${\r\n                    m.role === \"admin\" ? \"bg-blue-100 text-blue-800\" : \"bg-green-100 text-green-800\"\r\n                  }`}\r\n                >\r\n                  {m.role}\r\n                </span>\r\n              </td>\r\n              <td className=\"px-6 py-4 text-sm space-x-4\">\r\n                <button\r\n                  onClick={() =>\r\n                    handleUpdateRole(m.id, m.role === \"admin\" ? \"member\" : \"admin\")\r\n                  }\r\n                  className=\"text-blue-600 hover:text-blue-800\"\r\n                >\r\n                  {m.role === \"admin\" ? \"Demote\" : \"Promote\"}\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => handleDeleteMember(m.id)}\r\n                  className=\"text-red-600 hover:text-red-800\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n);\r\n};\r\n\r\nexport default MemberList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}